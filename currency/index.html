---
layout: default
title: pages.currency.title
description: pages.currency.description
---

{% include hero/currency.html %}

<div class="content page--currency">

	<section id="section-exchanges">
		<h2>{% t pages.currency.markets-heading %}</h2>

		<table id="exchanges">
			<thead>
				<tr>
					<th>Exchange</th>
					<th>Volume (24h)</th>
					<th>Price</th>
					<th>Volume (%)</th>
				</tr>
			</thead>
			<tbody>

			</tbody>
		</table>
	</section>

	<section id="section-governance">
		<h2>{% t pages.currency.governance-heading %}</h2>

		<table id="budgets">
			<thead>
				<tr>
					<th>Title</th>
					<th>Owner</th>
					<th>Votes (yes/no)</th>
					<th>Votes Required</th>
					<th>Monthly Amount</th>
					<th>Will be Funded</th>
				</tr>
			</thead>
			<tbody>

			</tbody>
		</table>
	</section>

	<section id="section-network">
		<h2>{% t pages.currency.network-heading %}</h2>

		<p>
			Current masternodes: <span id="masternodes_count"></span><br>
			Maximum masternodes so far: <span id="masternodes_max"></span>
		</p>
	</section>

	<section id="section-blockchain">
		<h2>{% t pages.currency.blockchain-heading %}</h2>

		<table id="blocks">
			<thead>
				<tr>
					<th>Height</th>
					<th>Block Time</th>
					<th>Transactions</th>
					<th>Value Out</th>
					<th>Difficulty</th>
				</tr>
			</thead>
			<tbody>

			</tbody>
		</table>
	</section>

</div>

<script type="text/javascript">
	window.onload = function () {
		$( document ).ready(function(){

			// Get the exchange data
			$.ajax({
				url: "{{ site.api }}/exchange/",
				error: function(jqXHR, textStatus, errorThrown) {
					console.log(jqXHR);
					console.log(textStatus);
					console.log('errorThrown:');
				}
			})
			.done(function(response){
				var exchanges = response;

				exchanges.map(function(exchange){
					if(exchange){
						console.log('exchange',exchange);
						var name 	= exchange.exchange,
							url 	= exchange.url
							volume 	= "$" + formatCurrency(exchange.volume,0),
							price 	= "$" + formatCurrency(exchange.price),
							change 	= formatNumber(exchange.percent_change);

						$("#exchanges>tbody").append('<tr><td data-header="Exchange"><a target="_blank" href="' + url + '">' + name + '</a></td><td data-header="Volume (24h)">' + volume + '</td><td data-header="Price">' + price + '</td><td data-header="Volume (%)">' + change + '%</td></tr>');
					}
				});
			});


			// Get the current number of masternodes.
			$.ajax({
				url: "{{ site.api }}/masternodes/stats/"
			})
			.done(function(response){
				console.log('masternode stats', response.stats);
				var masternodes_count	= formatNumber(response.stats['count']),
					masternodes_max 	= formatNumber(response.stats['max']);

				$("#masternodes_count").text(masternodes_count);
				$("#masternodes_max").text(masternodes_max);
			});


			// Get the budget proposals
			$.ajax({
				url: "{{ site.api }}/budgets/"
			})
			.done(function(response){
				var proposals = response.proposals;

				proposals.map(function(proposal){
					var	title 			= proposal.title ? proposal.title : proposal.name,
						url				= proposal.dw_url,
						owner 			= proposal.owner_username,
						votes_yes 		= proposal.yes,
						votes_no 		= proposal.no,
						required_votes 	= proposal.remaining_yes_votes_until_funding,
						amount_monthly 	= formatCurrency(proposal.monthly_amount)
						will_be_funded	= proposal.will_be_funded ? "yes" : "no";



					$("#budgets>tbody").append('<tr><td data-header="Title"><a href="' + url + '">' + title + '</a></td><td data-header="Owner">' + owner + '</td><td data-header="Votes (yes/no)">' + votes_yes + '/' + votes_no + '</td><td  data-header="Votes Required">' + required_votes + '</td><td data-header="Monthly Amount">' + amount_monthly + '</td><td data-header="Will be Funded">' + will_be_funded + '</td></tr>');

				});
			});


			// Get the blockchain info
			$.ajax({
				url: "{{ site.api }}/chain/latestBlocks/"
			})
			.done(function(response){
				var blocks = response.blocks;

				blocks.map(function(block){
					var height 		= block.height,
						age 		= moment.unix(block.time).format("LLL"),
						txs 		= block.txlength,
						out 		= block.cbvalue,
						difficulty 	= block.difficulty;

					$("#blocks>tbody").append('<tr><td data-header="Height">' + height + '</td><td data-header="Block Time">' + age + '</td><td data-header="Transactions">' + txs + '</td><td data-header="Value Out">' + out + '</td><td data-header="Difficulty">' + difficulty + '</td></tr>');
				});
			});

		});
	}
</script>
